@import '../../../styles/settings/colors';
@import '../../../styles/tools/breakpoints';

web-assessment {
  display: flex;
  flex-direction: column;
  padding: 0;

  &[animatable] {
    animation: .25s ease reverse modal-slideup;
  }

  &[animatable][open] {
    animation: .25s ease modal-slideup;
  }

  // Prevent FOUC by hiding children until after firstUpdated().
  // This isn't ":not(:defined)" because firstUpdated occurs after a frame.
  &.unresolved * {
    display: none !important;
  }

  // Override inline style
  @media (max-width: 480px) {
    & {
      height: unset !important;
    }
  }

  @include bp(sm) {
    & {
      height: 40rem;
      padding: 0 !important; // Override .w-callout
    }
  }

  // Allows buttons to resize with root font-size, maximizing space for questions
  .w-button {
    height: 3rem;
  }
}

@keyframes modal-slideup {
  0% {
    transform: translatey(40%);
    opacity: 0;
  }

  100% {
    transform: none;
    opacity: 1;
  }
}

// Overrides .w-button--primary so button matches self-assessment color
.web-assessment__open,
.web-assessment__open:hover,
.web-assessment__open:active,
.web-assessment__open:focus {
  background: $SELF_ASSESSMENT_PRIMARY_COLOR;
}

.web-assessment__close {
  display: none;
  position: absolute;
  right: .5rem;
  top: .75rem;
}

.web-assessment__lockup {
  color: $SELF_ASSESSMENT_PRIMARY_COLOR;
}

.web-assessment__lockup::before {
  content: 'school';
}

.web-assessment__content {
  display: none;
  flex: 1;
}

web-assessment[open],
web-assessment[animatable] {
  background: $WHITE;
  bottom: 0;
  left: 0;
  margin: 0;
  position: fixed;
  right: 0;
  top: 0;
  z-index: 250; // Between Header and SideNav

  // Adjust visisbility of open button, close button, set leader, and content
  // when in modal view on mobile.
  .web-assessment__open {
    display: none;
  }

  .web-assessment__close {
    display: inline-flex;
  }

  .web-assessment__header {
    padding: 1.5rem 3.5rem 1rem 1.5rem;
  }

  &.web-assessment--singleton .web-assessment__header {
    border-bottom: 1px solid $BORDER_COLOR;
  }

  .web-assessment__set-leader {
    display: none;
  }

  .web-assessment__content {
    display: flex;
  }
}

@include bp(sm) {
  .web-assessment__open {
    display: none;
  }

  .web-assessment__close {
    display: none;
  }

  .web-assessment__header {
    padding: 1.5rem 1.5rem 1rem;
  }

  .web-assessment--singleton .web-assessment__header {
    border-bottom: 1px solid $BORDER_COLOR;
  }

  .web-assessment__content {
    display: flex;
  }

  // Override visisbility of close button and set leader
  // when in modal view on desktop (in case JS fails).
  web-assessment[open] {
    margin: 2.25em 0;
    position: unset;
    z-index: unset;

    .web-assessment__close {
      display: none;
    }

    .web-assessment__header {
      padding: 1.5rem 1.5rem 1rem;
    }

    .web-assessment__set-leader {
      display: block;
    }
  }
}
