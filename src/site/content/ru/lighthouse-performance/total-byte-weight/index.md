---
layout: post
title: Избегайте чрезмерной нагрузки на сеть
description: Узнайте, как уменьшить время загрузки веб-страницы за счет уменьшения общего размера файлов ресурсов, которые вы предоставляете пользователям.
date: 2019-05-02
updated: 2020-05-29
web_lighthouse:
  - total-byte-weight
---

Большая нагрузка на сеть сильно коррелирует с длительным временем загрузки. Более того, такие страницы финансово невыгодны для пользователей, так как им, возможно, придется доплачивать за больший объем данных сотовой связи. Поэтому уменьшение общего размера сетевых запросов страницы улучшает впечатления о вашем сайте *и* снижает вероятные расходы пользователей на загрузку страницы.

{% Aside %} Чтобы узнать, сколько стоит доступ к вашему сайту во всем мире, ознакомьтесь со статьей WebPageTest [«Сколько стоит мой сайт?»](https://whatdoesmysitecost.com/). Вы можете скорректировать результаты с учетом покупательной способности. {% endAside %}

## Когда проверка нагрузки на сеть считается непройденной в Lighthouse

[Lighthouse](https://developers.google.com/web/tools/lighthouse/) показывает общий размер всех ресурсов, запрошенных вашей страницей, в [кибибайтах (КиБ)](https://en.wikipedia.org/wiki/Kibibyte). Сначала перечисляются самые тяжеловесные запросы:

<figure>{% Img src="image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cCFb8MJkwnYquq3K9UmX.png", alt="Скриншот проверки Avoid enormous network payloads (Избегайте чрезмерных нагрузок на сеть) в Lighthouse", width="800", height="518" %}</figure>

По [данным Интернет-архива](https://httparchive.org/reports/state-of-the-web?start=latest#bytesTotal), медианная нагрузка на сеть составляет от 1700 до 1900 КиБ. Чтобы помочь выявить самые тяжеловесные нагрузки на сеть, Lighthouse отмечает страницы, чей общий объем сетевых запросов превышает 5000 КиБ.

{% include 'content/lighthouse-performance/scoring.njk' %}

## Как уменьшить размер нагрузки на сеть

Старайтесь, чтобы общий размер в байтах не превышал 1600 КиБ. Этот целевой показатель основан на объеме данных, который теоретически может быть загружен через соединение 3G, при этом метрика [TTI (Время до интерактивности)](/interactive) должна составлять не более 10 секунд.

Вот несколько способов уменьшить размер нагрузки на сеть:

- Откладывайте запросы до тех пор, пока они не понадобятся. Один из возможных подходов см. в статье о [шаблоне PRPL](/apply-instant-loading-with-prpl).
- Оптимизируйте запросы, чтобы максимально уменьшить их размер. Возможные методы:
    - [Выполните минификацию и сжатие сетевых данных](/reduce-network-payloads-using-text-compression).
    - [Используйте формат изображений WebP вместо JPEG или PNG](/serve-images-webp).
    - [Установите уровень сжатия изображений в формате JPEG на 85](/use-imagemin-to-compress-images).
- Кешируйте запросы, чтобы страница не загружала ресурсы заново при повторном посещении. (См. [целевую страницу «Надежность сети»](/reliable), чтобы узнать, как работает кеширование и как его реализовать.)

## Рекомендации по стекам

### Angular

Применяйте [разделение кода на уровне маршрута](/route-level-code-splitting-in-angular/), чтобы минимизировать размер пакетов JavaScript. Подумайте также о предварительном кешировании активов с помощью [Angular service worker](/precaching-with-the-angular-service-worker/).

### Drupal

Подумайте об использовании [отзывчивых стилей изображения](https://www.drupal.org/docs/8/mobile-guide/responsive-images-in-drupal-8), чтобы уменьшить размер изображений, загружаемых на вашу страницу. Если вы используете Views для отображения нескольких элементов контента на странице, подумайте о реализации разбивки на страницы, чтобы ограничить количество элементов контента, отображаемых на данной странице.

### Joomla

Подумайте о том, чтобы показывать отрывки в категориях статей (например, с помощью ссылки Read more (Читать далее)), уменьшить количество статей на одной странице, разделить длинные публикации на несколько страниц или использовать плагин для отложенной загрузки комментариев.

### WordPress

Подумайте о том, чтобы показывать отрывки в списке публикаций (например, с помощью тега more), уменьшить количество сообщений на данной странице, разделить длинные сообщения на несколько страниц или использовать плагин для отложенной загрузки комментариев.

## Ресурсы

[Исходный код проверки **Avoid enormous network payloads (Избегайте чрезмерных нагрузок на сеть)**](https://github.com/GoogleChrome/lighthouse/blob/master/lighthouse-core/audits/byte-efficiency/total-byte-weight.js).
