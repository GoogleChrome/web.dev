---
layout: post
title: Общее время блокировки
description: Узнайте о метрике Lighthouse Total Blocking Time (общее время блокировки), а также о том, как ее измерять и оптимизировать.
web_lighthouse:
  - total-blocking-time
date: 2019-10-09
updated: 2021-06-04
---

Общее время блокировки (TBT) — это один из показателей, отслеживаемых в разделе **Performance** отчета Lighthouse. Каждый показатель отражает определенный аспект скорости загрузки страницы.

В отчете Lighthouse TBT отображается в миллисекундах:

<figure>{% Img src = "image/MtjnObpuceYe3ijODN3a79WrxLU2/wk3OTIdxFPoUImDCnjic.png", alt = "Снимок экрана аудита общего времени блокировки Lighthouse", width = "800", height = "592"%}</figure>

## Что такое TBT

TBT — это общее время, в течение которого страница не может отвечать на пользовательский ввод, такой как щелчки мыши, касания экрана или нажатия на клавиатуру. Сумма рассчитывается путем сложения *блокирующей части* всех [длительных задач](/long-tasks-devtools) в промежутке между [первой отрисовкой контента (FCP)](/first-contentful-paint/) и [временем до интерактивности (TTI)](/interactive/). Длительной задачей считается любая задача, которая выполняется более 50 мс. Время свыше 50 мс считается блокирующей частью. Например, если Lighthouse обнаруживает задачу длительностью в 70 мс, блокирующая часть будет составлять 20 мс.

## Как Lighthouse рассчитывает оценку вашего TBT

Оценка TBT рассчитывается путем сравнения времени TBT при загрузке вашей страницы на мобильных устройствах с временем TBT миллионов реальных сайтов. О том, как определяются пороговые значения оценок Lighthouse, см. в статье [Как определяются оценки показателей](/performance-scoring/#metric-scores).

В этой таблице показано, как интерпретировать оценку TBT:

<div class="table-wrapper scrollbar">
  <table>
    <thead>
      <tr>
        <th>Время TBT<br> (в миллисекундах)</th>
        <th>Цветовое кодирование</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>0–200</td>
        <td>Зеленый (быстрая загрузка)</td>
      </tr>
      <tr>
        <td>200-600</td>
        <td>Оранжевый (средняя загрузка)</td>
      </tr>
      <tr>
        <td>Более 600</td>
        <td>Красный (медленная загрузка)</td>
      </tr>
    </tbody>
  </table>
</div>

{% include 'content/lighthouse-performance/scoring.njk' %}

## Как улучшить оценку TBT

Чтобы узнать, как при помощи панели «Производительность» в Chrome DevTools диагностировать основную причину появления длительных задач, см. статью [В чем причина появления длительных задач?](/long-tasks-devtools/#what-is-causing-my-long-tasks).

Вот наиболее распространенные причины появления длительных задач:

- Загрузка, обработка или выполнение ненужного JavaScript-кода. В ходе анализа кода при помощи панели «Производительность» может выясниться, что основной поток выполняет работу, которая на самом деле не требуется для загрузки страницы. Улучшить оценку TBT можно посредством [сокращения полезной нагрузки JavaScript с помощью разделения кода](/reduce-javascript-payloads-with-code-splitting/), [удаления неиспользуемого кода](/remove-unused-code/) или [эффективной загрузки стороннего JavaScript](/efficiently-load-third-party-javascript/).
- Неэффективные JavaScript-инструкции. Например, предположим, что в ходе анализа кода при помощи панели «Производительность» вы обнаружили вызов `document.querySelectorAll('a')`, возвращающий 2000 узлов. Чтобы улучшить оценку TBT, можно перестроить код, заменив селектор на более избирательный, возвращающий только 10 узлов.

{% Aside %} На большинстве сайтов устранение загрузки, обработки или выполнения ненужного JavaScript-кода обычно позволяет добиться гораздо более серьезных улучшений. {% endAside %}

{% include 'content/lighthouse-performance/improve.njk' %}

## Ресурсы

- [Исходный код проверки **Total Blocking Time (общее время блокировки)**](https://github.com/GoogleChrome/lighthouse/blob/master/lighthouse-core/audits/metrics/total-blocking-time.js)
- [Увеличено ли у вас время до интерактивности (TTI) из-за длительных JavaScript-задач?](/long-tasks-devtools)
- [Оптимизация времени ожидания до первого взаимодействия с контентом (FID)](/optimize-fid)
- [Первая отрисовка контента (FCP)](/first-contentful-paint/)
- [Время до интерактивности (TTI)](/interactive/)
- [Сокращение размера полезной нагрузки JavaScript за счет разделения кода](/reduce-javascript-payloads-with-code-splitting/)
- [Удаление неиспользуемого кода](/remove-unused-code/)
- [Эффективная загрузка сторонних ресурсов](/efficiently-load-third-party-javascript/)
