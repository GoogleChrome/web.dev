---
layout: codelab
title: –î–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–∞–π—Ç!
authors:
  - petelepage
date: 2018-11-05
updated: 2021-02-12
description:
  –í —ç—Ç–æ–º –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–º –∑–∞–¥–∞–Ω–∏–∏ –≤—ã –Ω–∞—É—á–∏—Ç–µ—Å—å –¥–µ–ª–∞—Ç—å —Å–∞–π—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º—ã–º¬†‚Äî —Å –ø–æ–º–æ—â—å—é —Å–æ–±—ã—Ç–∏—è ¬´beforeinstallprompt¬ª.
glitch: make-it-installable?path=script.js
related_post: customize-install
tags:
  - progressive-web-apps
---

–í —ç—Ç–æ–º —Ñ—Ä–∞–≥–º–µ–Ω—Ç–µ –Ω–∞ Glitch —É–∂–µ –µ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ, —á—Ç–æ–±—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –≤ —Ç–æ–º —á–∏—Å–ª–µ¬†‚Äî [–æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ–π —Å–µ—Ä–≤–∏—Å-–≤–æ—Ä–∫–µ—Ä](https://glitch.com/edit/#!/make-it-installable?path=service-worker.js) –∏ [–º–∞–Ω–∏—Ñ–µ—Å—Ç –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](https://glitch.com/edit/#!/make-it-installable?path=manifest.json). –¢–∞–º —Ç–∞–∫–∂–µ –µ—Å—Ç—å –∫–Ω–æ–ø–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏, –∫–æ—Ç–æ—Ä–∞—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–∫—Ä—ã—Ç–∞.

## –ü—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è ¬´beforeinstallprompt¬ª

–ö–æ–≥–¥–∞ –±—Ä–∞—É–∑–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ `beforeinstallprompt`, —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —á—Ç–æ –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (Progressive Web App, PWA) –∏ –ø–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∫–Ω–æ–ø–∫—É —É—Å—Ç–∞–Ω–æ–≤–∫–∏. –°–æ–±—ã—Ç–∏–µ `beforeinstallprompt` –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, –∫–æ–≥–¥–∞ PWA –≤–∏–¥–∏—Ç [–∫—Ä–∏—Ç–µ—Ä–∏–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏](/install-criteria/).

{% Instruction 'remix', 'ol' %}

1. –î–æ–±–∞–≤—å—Ç–µ –≤ –æ–±—ä–µ–∫—Ç `window` –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏–π `beforeinstallprompt`.
2. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ `event` –∫–∞–∫ –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é: –æ–Ω–∞ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –ø–æ–∑–∂–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å –∑–∞–ø—Ä–æ—Å.
3. –û—Ç–æ–±—Ä–∞–∑–∏—Ç–µ –∫–Ω–æ–ø–∫—É —É—Å—Ç–∞–Ω–æ–≤–∫–∏.

–ö–æ–¥:

```js
window.addEventListener('beforeinstallprompt', (event) => {
  // –ó–∞–ø—Ä–µ—Ç –ø–æ–∫–∞–∑–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–π –º–∏–Ω–∏-–ø–∞–Ω–µ–ª–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö.
  event.preventDefault();
  console.log('üëç', 'beforeinstallprompt', event);
  // –£–±–∏—Ä–∞–µ–º —Å–æ–±—ã—Ç–∏–µ, —á—Ç–æ–±—ã –µ–≥–æ –º–æ–∂–Ω–æ –±—ã–ª–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∑–∂–µ.
  window.deferredPrompt = event;
  // –£–±–∏—Ä–∞–µ–º –∫–ª–∞—Å—Å ¬´hidden¬ª –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∫–Ω–æ–ø–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏.
  divInstall.classList.toggle('hidden', false);
});
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –∫–Ω–æ–ø–∫—É —É—Å—Ç–∞–Ω–æ–≤–∫–∏

–î–ª—è –ø–æ–∫–∞–∑–∞ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫—É –≤—ã–∑–æ–≤–∏—Ç–µ `prompt()` –Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–º —Å–æ–±—ã—Ç–∏–∏ `beforeinstallprompt`. –í—ã–∑–æ–≤ `prompt()` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –∫–Ω–æ–ø–∫—É —É—Å—Ç–∞–Ω–æ–≤–∫–∏, –ø–æ—Å–∫–æ–ª—å–∫—É `prompt()` –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–∑—ã–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é –∂–µ—Å—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

1. –î–æ–±–∞–≤—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –∫–ª–∏–∫–∞ –¥–ª—è –∫–Ω–æ–ø–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏.
2. –í—ã–∑–æ–≤–∏—Ç–µ `prompt()` –Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–º —Å–æ–±—ã—Ç–∏–∏ `beforeinstallprompt`.
3. –ó–∞–ø–∏—à–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–∞–ø—Ä–æ—Å–∞ –≤ –∂—É—Ä–Ω–∞–ª.
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è `beforeinstallprompt` –∑–Ω–∞—á–µ–Ω–∏–µ ¬´null¬ª.
5. –°–∫—Ä–æ–π—Ç–µ –∫–Ω–æ–ø–∫—É —É—Å—Ç–∞–Ω–æ–≤–∫–∏.

–ö–æ–¥:

```js
butInstall.addEventListener('click', async () => {
  console.log('üëç', 'butInstall-clicked');
  const promptEvent = window.deferredPrompt;
  if (!promptEvent) {
    // –û—Ç–ª–æ–∂–µ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.
    return;
  }
  // –ü–æ–∫–∞–∑–∞—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫—É.
  promptEvent.prompt();
  // –ó–∞–ø–∏—Å–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –∂—É—Ä–Ω–∞–ª.
  const result = await promptEvent.userChoice;
  console.log('üëç', 'userChoice', result);
  // –°–±—Ä–æ—Å–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞:
  // prompt() –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑.
  window.deferredPrompt = null;
  // –°–∫—Ä—ã—Ç—å –∫–Ω–æ–ø–∫—É —É—Å—Ç–∞–Ω–æ–≤–∫–∏.
  divInstall.classList.toggle('hidden', true);
});
```

## –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏¬†‚Äî –Ω–µ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –≠—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∏–∑ –º–µ–Ω—é Chrome, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–π –º–∏–Ω–∏-–ø–∞–Ω–µ–ª–∏ –∏ —Å –ø–æ–º–æ—â—å—é [–∑–Ω–∞—á–∫–∞ –≤ –æ–º–Ω–∏–±–æ–∫—Å–µ](/promote-install/#browser-promotion). –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –≤—Å–µ —ç—Ç–∏ —Å–ø–æ—Å–æ–±—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –º–æ–∂–Ω–æ, –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—è –≤—ã–∑–æ–≤ `appinstalled`.

1. –î–æ–±–∞–≤—å—Ç–µ –≤ –æ–±—ä–µ–∫—Ç `window` –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏–π `appinstalled`.
2. –ó–∞–ø–∏—à–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–æ–±—ã—Ç–∏–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏–ª–∏ –∏–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º.

–ö–æ–¥:

```js
window.addEventListener('appinstalled', (event) => {
  console.log('üëç', 'appinstalled', event);
  // –û—á–∏—Å—Ç–∏—Ç—å ¬´deferredPrompt¬ª –¥–ª—è —Å–±–æ—Ä—â–∏–∫–∞ –º—É—Å–æ—Ä–∞
  window.deferredPrompt = null;
});
```

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º: —Ç–µ–ø–µ—Ä—å –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å!

–ß—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –µ—â–µ:

- [–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∑–∞–ø—É—â–µ–Ω–æ –ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –≥–ª–∞–≤–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞](/customize-install/#detect-mode).
- [–ü–æ–∫–∞–∑–∞—Ç—å –∑–∞–ø—Ä–æ—Å –æ–± —É—Å—Ç–∞–Ω–æ–≤–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤–∞–º–∏ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã](https://developer.chrome.com/blog/app-install-banners-native/).
