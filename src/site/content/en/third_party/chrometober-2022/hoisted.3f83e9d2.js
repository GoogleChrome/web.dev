import"https://flackr.github.io/scroll-timeline/dist/scroll-timeline.js";const h=()=>{const e=document.querySelectorAll("[data-scroll-trigger]"),t=document.querySelectorAll(".page__side"),o=r=>{for(let s of t)s.classList.remove("in-view");let i=r.reverse().find(s=>s.isIntersecting),a;if(!i&&r.length>1)return;!i&&r.length===1?(a=(!r[0].isIntersecting&&r[0]).target.dataset.scrollTrigger-1,i=document.querySelector(`[data-scroll-target="${a}"]`)):(i=i.target,a=parseInt(i.dataset.scrollTrigger));let l=document.querySelector(`[data-scroll-target="${a}"] .page__side--back`),d=document.querySelector(`[data-scroll-target="${a+1}"] .page__side--front`);t.forEach(s=>s.setAttribute("inert","")),l?.removeAttribute("inert"),l?.classList.add("in-view"),d?.removeAttribute("inert"),d?.classList.add("in-view"),window.ga&&window.ga("send","event",{event_action:"Section Order",event_label:`pages-${a}-and-${a+1}`,event_category:"Chrometober Book",non_interaction:!0})};(r=>{const i=new IntersectionObserver(o,{threshold:.9});for(let a of r)i.observe(a)})(e)};window.addEventListener("DOMContentLoaded",h);const R="inline";let u,c;const m={delay:{phase:"enter",percent:CSS.percent(0)},endDelay:{phase:"enter",percent:CSS.percent(100)},fill:"both"},M=(e,t)=>{window.CHROMETOBER_TIMELINES||(window.CHROMETOBER_TIMELINES=[]);const o=document.querySelector(`[data-scroll-target="${e.getAttribute("data-scroll-trigger")}"]`),n=new ViewTimeline({subject:e,axis:R});window.CHROMETOBER_TIMELINES.push(n),t===0&&u.animate([{translate:"50% 0"}],{timeline:n,...m}),o.animate([{transform:`translateZ(${(c.length-t)*2}px)`},{transform:`translateZ(${(c.length-t)*2}px)`,offset:.75},{transform:`translateZ(${(c.length-t)*-1}px)`}],{timeline:n,...m}),o.querySelector(".page__paper").animate([{transform:"rotateY(0deg)"},{transform:"rotateY(-180deg)"}],{timeline:n,...m})},O=()=>{u=document.querySelector(".book"),c=document.querySelectorAll("[data-scroll-trigger]"),document.querySelector("[data-scroll-intro]"),document.querySelector("[data-scroll-outro]"),document.querySelector("[data-scroll-intro-two]"),c.forEach(M),document.querySelectorAll("article").forEach(e=>{const t=e.querySelector("h2").innerText;e.addEventListener("click",()=>{e.querySelector("a")?.click(),window.ga&&ga("send","event",{event_action:"Read more",event_label:t,event_category:"Chrometober Book",non_interaction:!1})})})};window.addEventListener("DOMContentLoaded",O);const T=()=>{const e=document.querySelector(".scarecrow__eye--left"),t=document.querySelector(".scarecrow__eye--right");e.animate([{transform:"translateX(-150%) scale(0.3)"},{transform:"none"}],{timeline:CHROMETOBER_TIMELINES[0],timeRange:"enter 25% 90%",fill:"both"}),t.animate([{transform:"translateX(-100%) scale(0.5)"},{transform:"none"}],{timeline:CHROMETOBER_TIMELINES[0],timeRange:"enter 25% 90%",fill:"both"})};window.addEventListener("DOMContentLoaded",T);const I=()=>{const e=document.querySelector(".coffin__lid"),t=document.querySelector(".coffin__zombie");e.animate([{transform:"rotate(-1deg)"},{transform:"rotate(3deg) scale(1.1) translateX(18%)"}],{timeline:CHROMETOBER_TIMELINES[2],timeRange:"enter 105% 180%",fill:"both"}),t.animate([{transform:"translateX(-20%)"},{transform:"translateX(0%)"}],{timeline:CHROMETOBER_TIMELINES[2],timeRange:"enter 20% 95%",fill:"backwards"}),t.animate([{transform:"translateX(0%)"},{transform:"translateX(-20%)"}],{timeline:CHROMETOBER_TIMELINES[2],timeRange:"enter 105% 180%",fill:"forwards"})};window.matchMedia("(prefers-reduced-motion: no-preference)").matches&&window.addEventListener("DOMContentLoaded",I);const L=()=>{document.querySelector(".owl__owl").animate([{transform:"translateY(110%) rotate(2deg)"},{transform:"translateY(0)"}],{timeline:CHROMETOBER_TIMELINES[1],timeRange:"enter 80% 90%",fill:"both"})};window.matchMedia("(prefers-reduced-motion: no-preference)").matches&&window.addEventListener("DOMContentLoaded",L);const C=()=>{const e=document.querySelector(".gargoyle"),t=e.querySelector(".gargoyle__wing--left"),o=e.querySelector(".gargoyle__wing--right");e.animate([{transform:"translateY(0)"},{transform:"translateY(-200%)"}],{fill:"both",timeline:CHROMETOBER_TIMELINES[2],delay:{phase:"enter",percent:CSS.percent(110)},endDelay:{phase:"enter",percent:CSS.percent(150)}}),t.animate([{rotate:"0deg"},{rotate:"-35deg",offset:.5},{rotate:"0deg"}],{iterations:4,timeline:CHROMETOBER_TIMELINES[2],delay:{phase:"enter",percent:CSS.percent(90)},endDelay:{phase:"enter",percent:CSS.percent(150)},fill:"both"}),o.animate([{rotate:"0deg"},{rotate:"35deg",offset:.5},{rotate:"0deg"}],{iterations:4,timeline:CHROMETOBER_TIMELINES[2],delay:{phase:"enter",percent:CSS.percent(90)},endDelay:{phase:"enter",percent:CSS.percent(150)},fill:"both"})};window.matchMedia("(prefers-reduced-motion: no-preference)").matches&&window.addEventListener("DOMContentLoaded",C);const E=(e,t,o,n)=>{const r=t-e,i=n-o;return a=>o+((a-e)/r*i||0)},p=(e,t,o)=>Math.min(Math.max(o,e),t),b=()=>{const e=document.querySelector(".portrait"),t=e.querySelector(".portrait__eyes"),o=e.querySelector(".portrait__nose"),n=5,r=100,i=({x:a,y:l})=>{const{left:d,width:s,top:w,height:S}=o.getBoundingClientRect(),f=d+s*.5,g=w+S*.5,_=p(-n,n,E(f-r,f+r,-n,n)(a)),y=p(-n,n,E(g-r,g+r,-n,n)(l));t.style.setProperty("--x",_),t.style.setProperty("--y",y)};window.addEventListener("pointermove",i)};window.addEventListener("DOMContentLoaded",b);const v=()=>{const e=document.querySelector(".bat");e.animate([{transform:"translateX(100%) translateY(-100%) scale(0.1)"},{transform:"none"}],{timeline:CHROMETOBER_TIMELINES[1],timeRange:"enter 25% 90%",fill:"backwards"}),e.animate([{transform:"none"},{transform:"translateX(-100%) translateY(-100%) scale(0.1)"}],{timeline:CHROMETOBER_TIMELINES[1],timeRange:"enter 110% 150%",fill:"forwards"})};window.matchMedia("(prefers-reduced-motion: no-preference)").matches&&window.addEventListener("DOMContentLoaded",v);const q=()=>{document.querySelector(".bunny").animate([{rotate:"90deg"},{rotate:"0deg",translate:"0 0 "},{translate:"-50% 0",rotate:"0deg"}],{timeline:CHROMETOBER_TIMELINES[1],delay:{phase:"enter",percent:CSS.percent(25)},endDelay:{phase:"enter",percent:CSS.percent(90)},fill:"both"})};window.matchMedia("(prefers-reduced-motion: no-preference)").matches&&window.addEventListener("DOMContentLoaded",q);
