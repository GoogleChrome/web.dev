{% set inlineScript %}
  // A global function that the theme toggle can use to apply the current theme.
  window.applyThemeSetting = function(override) {
    const currentSetting = override || localStorage.getItem('user-color-scheme');
    const currentAttribute = document.documentElement.getAttribute('data-user-theme');

    if (currentSetting) {
      if (currentSetting !== currentAttribute) {
        document.documentElement.setAttribute('data-user-theme', currentSetting);
      }
      const lhRoot = document.querySelector('web-lighthouse-viewer article.lh-root');
      lhRoot && lhRoot.classList.toggle('lh-dark', currentSetting === 'dark');
    }
  };
window.applyThemeSetting();
{% endset %}
<script>{{ inlineScript | minifyJs | cspHash | safe }}</script>
