/// PATTERN LIBRARY LOCATION
/// https://web.dev/design-system/pattern/card
.card {
  @include card-base-styles();

  &:hover {
    @include apply-utility('bg', 'mid-bg');
  }

  &:link:hover {
    @include apply-utility('bg', 'highlight-interact-bg');
  }
}

.card__content {
  flex: auto;
  max-width: 100%;
  overflow-wrap: break-word;

  &:not(:first-child) {
    @include apply-utility('gap-top', 'size-1');
  }

  a:not([class]) {
    color: currentColor;
  }

  a:not(:hover) {
    text-decoration: none;
  }

  p,
  li {
    @include apply-utility('color', 'mid-text');
  }
}

.card__action {
  display: inline-block;
  text-transform: uppercase;
  text-decoration: none;

  @include apply-utility('flow-space', 'size-1');
  @include apply-utility('weight', 'medium');
  @include apply-utility('leading', 'flat');
  @include apply-utility('gap-top', 'size-1');

  /// This breakout element allows the whole card to be hovered
  /// More: https://piccalil.li/tutorial/create-a-semantic-break-out-button-to-make-an-entire-element-clickable/
  &::before {
    content: '';
    position: absolute;
    inset: 0;
  }
}

.card__avatars {
  --gutter: 0.5rem;
  --flow-space: 0.5rem;
  --avatar-size: 2rem;

  font-size: get-size('size-0');
}

.card__authors {
  --gutter: 1ex;

  padding: 0;
  flex: auto;
}

.card__meta {
  font-size: 0.9em;
  padding: 0;
  margin: 0 0 1em 0;

  &,
  li {
    display: flex;
    gap: 0.5rem;
  }

  li + li::before {
    content: 'Â·';
    display: block;
  }

  /// Adds a little line above the first item
  li:first-of-type {
    position: relative;

    @include apply-utility('color', 'highlight-text');

    &::before {
      content: '';
      width: 100%;
      height: 2px;
      background: get-utility-value('color', 'highlight-text');
      position: absolute;
      inset: -0.5ex 0 0 0;
    }
  }
}

.card__header {
  width: 100%;
  margin-bottom: get-space('size-1');
  font-size: 0.875rem;
}

.card__hero {
  width: 100%;
  aspect-ratio: 5/3;
  object-fit: cover;
  border-radius: $global-radius-base;
}

.card__tags {
  --gutter: 0.5rem;
  margin-block-start: get-space('base');
}

/// EXCEPTIONS
.card[data-style='branded'] {
  max-width: 25rem;
  min-width: 22rem;

  > img {
    height: unset;
  }

  &:hover {
    @include apply-utility('bg', 'core-bg');
  }
}

/// These cards are way too wide and tall for really small screens
/// so these little adjustments help that, without affecting other screens
@include media-query('xs') {
  .card[data-style='branded'] {
    min-width: 16rem;
  }
}

.prose .related-card {
  margin: 40px auto;

  @include media-query('md') {
    margin: 80px auto;
  }
}

.related-card {
  display: grid;
  grid-template-columns: auto;

  svg {
    fill: var(--color-mid-text);
    height: 20px;
    margin-right: 10px;
  }

  span {
    margin-top: 0;
    font-size: 0.875rem;
  }

  h4 {
    font-size: 1.25rem;

    @include media-query('md') {
      font-size: 1.5rem;
    }

    @include media-query('lg') {
      font-size: 1.75rem;
    }      
  }

  .card  {
    flex-flow: column-reverse;
    max-width: 100%;

    &__content {
      margin: 20px 0 0;
    }

    &__eyebrow {
      align-items: center;
      display: flex;
      margin: 25px 0;
  
      > p {
        margin: 0;
        line-height: 0;
      }
    }

    img {
      width: 100%;
      border-radius: 5px;
    }

    .content {
      width: 100%;
      padding-right: 0;
    }

    @include media-query('md') {
      align-items: center;
      display: flex;
      flex-flow: row;
      gap: 30px;
      margin-top: 0;
  
      &__eyebrow {
        margin-top: 0;
      }

      &__content {
        margin: 25px 0;
      }  

      .content {
        width: 50%;
      }

      img {
        height: 220px;
        width: 50%;
      }
    }

    @include media-query('lg') {
      .content {
        padding-right: 25px;
      }
    }
  }
}

.theme-preview,
.related-card {
  &__box {
    width: 200px;
    height: 40px;
  }

  .bg-tertiary,
  .bg-quaternary,
  .bg-pink,
  .bg-dark,
  .bg-blue  {
    svg {
      fill: get-color('shades-light-bright');
    }
  
    p, span, h4 {
      color: get-color('shades-light-bright');
    }
  }
  
  .bg-quaternary {
    $CORE_QUATERNARY: get-color('core-quaternary');
    background-color: $CORE_QUATERNARY;
  
    &:hover,
    &:focus,
    &:active {
      background-color: rgba($CORE_QUATERNARY, .9);
    }
  }

  .bg-dark {
    background-color: #26373D;
  
    &:hover,
    &:focus,
    &:active {
      background-color: rgba(#26373D, .9);
    }
  }
  
  .bg-tertiary {
    $CORE_TERTIARY: get-color('core-tertiary');
    background-color: $CORE_TERTIARY;
  
    &:hover,
    &:focus,
    &:active {
      background-color: rgba($CORE_TERTIARY, .9);
    }
  }

  .bg-pink {
    $CORE_SECONDARY_SHADE: get-color('core-secondary-shade');
    background-color: $CORE_SECONDARY_SHADE;
  
    &:hover,
    &:focus,
    &:active {
      background-color: rgba($CORE_SECONDARY_SHADE, .9);
    }
  }
  
  .bg-blue {
    $CORE_PRIMARY: get-color('core-primary');
    background-color: $CORE_PRIMARY;
  
    &:hover,
    &:focus,
    &:active {
      background-color: rgba($CORE_PRIMARY, .9);
    }
  }
}
